function readTextFile(file, callback) {
    var rawFile = new XMLHttpRequest();
    rawFile.overrideMimeType("application/json");
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function() {
        if (rawFile.readyState === 4 && rawFile.status == "200") {
            callback(rawFile.responseText);
        }
    }
    rawFile.send(null);
}

//usage:
$(document).ready(function () {
  readTextFile("./assets/json/jobs-en.json", function(text){
      var jobs = JSON.parse(text)["jobs"];
      $.each(jobs, function(i){
        job = jobs[i];
        job_html = "<div id='"+ i +"-job' class='card_info'>";
        job_html += '<a href="'+ job["link"] +'" class="image fit"><img src="'+ job["img"] +'" alt="'+ job["enterprise"] +'" /></a>';
        job_html += '<div class="title-info"><h3>'+ job["enterprise"]+'</h3><h4><i>'+ job["job"] +'</i></h4>';
        job_html += '<div class="date"><p>'+ job["date"] +'</p><p>'+ job["location"] +'</p></div>';
        job_html += '</div>';
        job_html += '<p>'+ job["extract"] +'</p>';
        job_html += '<a class="info" href="'+ job["link"] +'"><i class="fa fa-info-circle" aria-hidden="true"></i>'+"To know more</a>";
        // job_html += job["more_details"];
        $("#experience").append(job_html);
      })
  });
  readTextFile("./assets/json/studies-en.json", function(text){
      var grads = JSON.parse(text)["grads"];
      $.each(grads, function(i){
        grad = grads[i];
        grad_html = "<div id='"+ i +"-grad' class='card_info'>";
        if(grad["link"]){
            grad_html += '<a href="'+ grad["link"] +'" class="image fit"><img src="'+ grad["img"] +'" alt="'+ grad["school"] +'" /></a>';
        }else{
            grad_html += '<div class="image fit"></div>';
        }
        grad_html += '<div class="title-info">'
        if(grad["link"]){
            grad_html += '<h3>'+ grad["school"]+'</h3>'
            grad_html += '<h4><i>'+ grad["grad"] +'</i></h4>';
        }else{
          grad_html += '<h3>'+ grad["grad"]+'</h3>'
        }
        grad_html += '<div class="date"><p>'+ grad["date"] +'</p>';
        if(grad["link"]){
            grad_html += '<a class="info" href="'+ grad["link"] +'"><i class="fa fa-info-circle" aria-hidden="true"></i>'+"To know more</a>";
        }
        grad_html += '</div>';
        $("#graduates").append(grad_html);
      })
  });
  readTextFile("./assets/json/skills-en.json", function(text){
    var skills = JSON.parse(text)["skills"];
    $.each(skills, function(i){
      skill = skills[i];
      skill_html = '<div class="skill_content">';
      skill_html += '<p class="skill_area">'+ skill["main"] +"</p><ul>";
      $.each(skill["skills"], function(i, k){
        skill_html += '<li>'+ k['name'];
        skill_html += '<progress class="success" max="100" value="' + k['level'] + '"></progress>'
        skill_html += '</li>';
      })
      skill_html += '</ul></div>';
      $("#skills").append(skill_html);
    })
  });
  readTextFile("./assets/json/contact.json", function(text){
      var contacts = JSON.parse(text)["contacts"];
      $.each(contacts, function(i){
        contact = contacts[i];
        contact_html = "<li>";
        contact_html += '<a href="'+ contact["link"] +'"><i class="fa ' + contact["picto"] + '"></i><span class="hide-for-small-only">'+ contact["name"] +'</span></a>';
        contact_html += '</li>';
        $("#contact").append(contact_html);
      })
  });
})
