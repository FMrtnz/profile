function readTextFile(file, callback) {
    var rawFile = new XMLHttpRequest();
    rawFile.overrideMimeType("application/json");
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function() {
        if (rawFile.readyState === 4 && rawFile.status == "200") {
            callback(rawFile.responseText);
        }
    }
    rawFile.send(null);
}

//usage:
$(document).ready(function () {
  readTextFile("./assets/json/jobs.json", function(text){
      var jobs = JSON.parse(text)["jobs"];
      $.each(jobs, function(i){
        job = jobs[i];
        job_html = "<div id='"+ i +"-job' class='row'>";
        job_html += '<a href="'+ job["link"] +'" class="image fit"><img src="'+ job["img"] +'" alt="'+ job["enterprise"] +'" /></a></div>';
        job_html += '<div class="title-info"><h3>'+ job["enterprise"]+'</h3><h4><i>'+ job["job"] +'</i></h4></div>';
        job_html += '<div class="date"><p>'+ job["date"] +'</p><p>'+ job["location"] +'</p></div>';
        job_html += '<p>'+ job["extract"] +'</p>';
        job_html += '<a class="info" href="'+ job["link"] +'"><i class="fa fa-info-circle" aria-hidden="true"></i>'+"Pour plus d'informations</a>";
        job_html += job["more_details"];
        job_html += '</div>';
        $("#experience").append(job_html);
      })
  });
  readTextFile("./assets/json/studies.json", function(text){
      var grads = JSON.parse(text)["grads"];
      $.each(grads, function(i){
        grad = grads[i];
        grad_html = "<div id='"+ i +"-grad' class='row'>";
        grad_html += '<a href="'+ grad["link"] +'" class="image fit"><img src="'+ grad["img"] +'" alt="'+ grad["school"] +'" /></a></div>';
        grad_html += '<div class="title-info"><h3>'+ grad["school"]+'</h3><h4><i>'+ grad["grad"] +'</i></h4></div>';
        grad_html += '<div class="date"><p>'+ grad["date"] +'</p></div>';
        grad_html += '<a class="info" href="'+ grad["link"] +'"><i class="fa fa-info-circle" aria-hidden="true"></i>'+"Pour plus d'informations</a>";
        grad_html += grad["more_details"];
        grad_html += '</div>';
        $("#graduates").append(grad_html);
      })
  });
  readTextFile("./assets/json/skills.json", function(text){
    var skills = JSON.parse(text)["skills"];
    $.each(skills, function(i){
      skill = skills[i];
      skill_html = "<div>";
      skill_html += '<p>'+ skill["main"] +"</p><ul>";
      $.each(skill["skills"], function(i, k){
        skill_html += '<li>'+ k +'</li>';
      })
      skill_html += '</ul></div>';
      $("#skills").append(skill_html);
    })
  });
})
